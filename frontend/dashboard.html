<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Resume Optimizer — Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css"/>
  <script>
    tailwind.config = { theme: { extend: { fontFamily: { sans: ['Inter','ui-sans-serif','system-ui'] }, colors:{ brand:'#4f46e5' } } } }
  </script>
</head>
<body class="bg-gray-50">

  <!-- Topbar -->
  <header class="sticky top-0 z-20 bg-white/80 backdrop-blur border-b">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <svg width="28" height="28" viewBox="0 0 24 24" class="text-brand">
          <path fill="currentColor" d="M7 2h7l5 5v13a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2Z"/>
          <circle cx="10" cy="10" r="2.5" fill="#f59e0b"/>
        </svg>
        <span class="font-semibold">Resume Optimizer</span>
      </div>
      <div class="flex items-center gap-3">
        <span id="userBadge" class="text-sm text-gray-600"></span>
        <button class="btn-danger" onclick="logout()">Logout</button>
      </div>
    </div>
  </header>

  <div class="max-w-7xl mx-auto px-4 py-6 grid grid-cols-12 gap-6">
    <!-- Sidebar -->
    <aside class="col-span-12 md:col-span-3 lg:col-span-2">
      <nav class="sticky top-[76px] space-y-2">
        <button class="nav-item active" data-target="upload">📤 Upload / Paste</button>
        <button class="nav-item" data-target="analyze">📈 ATS Analyzer</button>
        <button class="nav-item" data-target="jobs">💼 Job Matches</button>
        <button class="nav-item" data-target="history">🗂️ History</button>
        <button class="nav-item" data-target="tips">💡 Smart Tips</button>
        <button class="nav-item" data-target="roadmap">🗺️ Career Roadmap</button>
      </nav>

      <div class="mt-6 p-4 rounded-xl bg-white shadow-sm text-sm text-gray-600">
        <p>Need help?</p>
        <button class="mt-2 btn-secondary w-full" onclick="startTour()">Start Guided Tour</button>
      </div>
    </aside>

    <!-- Main -->
    <main class="col-span-12 md:col-span-9 lg:col-span-10 space-y-6">

      <!-- Section: Upload -->
      <section id="upload" class="card section">
        <div class="card-header">
          <h2>Upload or Paste Resume</h2>
        </div>
        <div class="p-5 grid md:grid-cols-2 gap-5">
          <!-- Drag & Drop -->
          <div class="rounded-xl border-2 border-dashed border-gray-300 bg-white p-6 text-center"
               ondragover="event.preventDefault(); this.classList.add('ring-2','ring-indigo-300')"
               ondragleave="this.classList.remove('ring-2','ring-indigo-300')"
               ondrop="handleDrop(event)">
            <p class="text-gray-600">Drag & drop a <strong>.txt</strong> resume here</p>
            <p class="text-xs text-gray-400 mt-1">For PDFs/DOCX, use “Paste Text” on the right</p>
            <input id="fileInput" type="file" accept=".txt" class="hidden" onchange="handleFile(event)">
            <button class="btn-primary mt-4" onclick="document.getElementById('fileInput').click()">Browse</button>
            <p id="uploadStatus" class="mt-3 text-sm text-emerald-600"></p>
          </div>

          <!-- Paste text -->
          <div>
            <label class="text-sm font-medium text-gray-700">Paste Resume Text</label>
            <textarea id="pasteArea" rows="10"
                      class="mt-2 w-full rounded-xl border bg-white p-3 outline-none focus:ring-2 focus:ring-indigo-300"
                      placeholder="Paste your resume text here (supports any source)"></textarea>
            <div class="flex items-center gap-3 mt-3">
              <button class="btn-primary" onclick="usePasted()">Use Pasted Text</button>
              <button class="btn-secondary" onclick="clearPasted()">Clear</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Section: Analyzer -->
      <section id="analyze" class="card section hidden">
        <div class="card-header">
          <h2>ATS Analyzer</h2>
          <div class="flex items-center gap-3">
            <span class="text-sm text-gray-500">Target Role:</span>
            <select id="targetRole" class="rounded-lg border p-2">
              <option>General (All)</option>
              <option>Frontend Developer</option>
              <option>Backend Developer</option>
              <option>Data Analyst</option>
              <option>Data Scientist</option>
              <option>Cloud Engineer</option>
              <option>Product Manager</option>
            </select>
          </div>
        </div>

        <div class="p-5 space-y-6">
          <!-- Score -->
          <div>
            <div class="flex items-center justify-between mb-2">
              <span class="font-semibold text-gray-700">ATS Score</span>
              <span id="scoreLabel" class="text-sm text-gray-500">—</span>
            </div>
            <div class="h-3 bg-gray-200 rounded-full overflow-hidden">
              <div id="scoreBar" class="h-full bg-indigo-600" style="width:0%"></div>
            </div>
          </div>

          <!-- Chips -->
          <div class="grid md:grid-cols-2 gap-6">
            <div class="bg-white rounded-xl p-4 shadow-sm">
              <h3 class="font-semibold mb-2">✅ Found Keywords</h3>
              <div id="foundList" class="chip-wrap"></div>
            </div>
            <div class="bg-white rounded-xl p-4 shadow-sm">
              <h3 class="font-semibold mb-2">❌ Missing Keywords</h3>
              <div id="missingList" class="chip-wrap"></div>
            </div>
          </div>

          <!-- One-click tailored summary -->
          <div class="bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200 rounded-xl p-4">
            <div class="flex items-center justify-between mb-2">
              <h3 class="font-semibold">One-Click Tailored Summary</h3>
              <button class="btn-primary" onclick="generateSummary()">Generate</button>
            </div>
            <textarea id="summaryBox" rows="4" class="w-full rounded-xl border p-3"
                      placeholder="Click Generate to create a role-specific resume summary..."></textarea>
          </div>
        </div>
      </section>

      <!-- Section: Jobs -->
      <section id="jobs" class="card section hidden">
        <div class="card-header"><h2>Job Matches</h2></div>
        <div id="jobGrid" class="p-5 grid sm:grid-cols-2 lg:grid-cols-3 gap-5"></div>
        <div id="jobEmpty" class="p-5 text-gray-500">Upload & analyze your resume to see matched jobs.</div>
      </section>

      <!-- Section: History -->
      <section id="history" class="card section hidden">
        <div class="card-header">
          <h2>History</h2>
          <div class="flex items-center gap-3">
            <button class="btn-secondary" onclick="exportHistory()">Export</button>
            <button class="btn-danger" onclick="clearHistory()">Clear</button>
          </div>
        </div>
        <div class="p-5">
          <ul id="historyList" class="divide-y bg-white rounded-xl shadow-sm overflow-hidden"></ul>
        </div>
      </section>

      <!-- Section: Tips -->
      <section id="tips" class="card section hidden">
        <div class="card-header"><h2>Smart Tips</h2></div>
        <div id="tipsList" class="p-5 space-y-3"></div>
      </section>

      <!-- Section: Career Roadmap (unique) -->
      <section id="roadmap" class="card section hidden">
        <div class="card-header"><h2>Career Roadmap</h2></div>
        <div class="p-5">
          <ol id="roadmapList" class="relative border-s-2 border-indigo-200 pl-6 space-y-6"></ol>
        </div>
      </section>

    </main>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast hidden"></div>

  <script src="script.js"></script>
</body>
</html>
